{"name":"odc-schedule-next-push-message","description":"Default description","uuid":"f291b782-72d3-49eb-8434-e47e388c2ea1","resources":[{"values":[{"value":"Content set complete, no more messages","modes":["RICH_MESSAGING"],"content_type":"TEXT","mime_type":"text/plain","language_id":"e83350e8-d186-4813-8655-b0bd4e61b0f3"}],"uuid":"5cb737f4-a474-45ea-bdfb-9832e0093c0e"}],"flows":[{"label":null,"name":"stack","blocks":[{"label":null,"name":"schedule_next_message_case","type":"Core.Case","config":{},"tags":[],"uuid":"9e4d88f3-c69c-559d-a9fb-c92bccadd905","ui_metadata":{},"exits":[{"default":false,"name":"Exit for schedule_next_message_case_condition_0","config":{},"test":"count(contentset.body.pages) == contact.push_messaging_content_set_position","uuid":"73dceb01-8355-4a8d-87aa-b01fbda1779f","destination_block":"e8dcfb9c-3c9b-5c24-9a70-5e10d845d434","semantic_label":null,"vendor_metadata":{}},{"default":true,"name":"Exit for schedule_next_message_case_condition_1","config":{},"test":null,"uuid":"2911399a-bee7-4fa2-816b-28cae623154c","destination_block":"3b542704-3580-507b-9558-f2d5683a8bbb","semantic_label":null,"vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{}},{"label":null,"name":"page","type":"Core.Case","config":{},"tags":[],"uuid":"3b542704-3580-507b-9558-f2d5683a8bbb","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"contentset.body.pages[contact.push_messaging_content_set_position]","config":{},"test":"","uuid":"ce6477fe-4d9f-4684-aedf-3badb11861de","destination_block":"71e53c09-ff55-566b-b5d6-84297b45fbe9","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":16},"name":"ScheduleNextMessage","uuid":"7f247ac5-8884-504a-9f4b-74fdf1c28840"},"card_item":{"expression":{},"meta":{"column":3,"line":17},"type":"expression"},"index":1}}}}}},{"label":null,"name":"contact_field","type":"Core.Case","config":{},"tags":[],"uuid":"71e53c09-ff55-566b-b5d6-84297b45fbe9","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"page.contact_field","config":{},"test":"","uuid":"d812eae4-1595-455e-b5d0-aac86ae6999d","destination_block":"eeaef0cf-3fb3-564e-8b04-c3a525512ff4","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":16},"name":"ScheduleNextMessage","uuid":"7f247ac5-8884-504a-9f4b-74fdf1c28840"},"card_item":{"expression":{},"meta":{"column":3,"line":18},"type":"expression"},"index":0}}}}}},{"label":null,"name":"unit","type":"Core.Case","config":{},"tags":[],"uuid":"eeaef0cf-3fb3-564e-8b04-c3a525512ff4","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"find([[\"minutes\", \"m\"], [\"hours\", \"h\"], [\"days\", \"D\"], [\"months\", \"M\"]],\n&(&1[0] == page.unit))[1]","config":{},"test":"","uuid":"0e9550f6-c84a-4850-b09f-51fe2f6e83e4","destination_block":"ef95e080-1070-5291-aeed-ee5b54983e2d","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":16},"name":"ScheduleNextMessage","uuid":"7f247ac5-8884-504a-9f4b-74fdf1c28840"},"card_item":{"expression":{},"meta":{"column":3,"line":20},"type":"expression"},"index":0}}}}}},{"label":null,"name":"offset","type":"Core.Case","config":{},"tags":[],"uuid":"ef95e080-1070-5291-aeed-ee5b54983e2d","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"if(page.before_or_after == \"before\", page.time * -1, page.time * 1)","config":{},"test":"","uuid":"2b85ef0f-2297-48bc-a722-a1e4c7a4e565","destination_block":"b97e80e8-0672-582f-8912-cfa06f396c38","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":16},"name":"ScheduleNextMessage","uuid":"7f247ac5-8884-504a-9f4b-74fdf1c28840"},"card_item":{"expression":{},"meta":{"column":3,"line":26},"type":"expression"},"index":0}}}}}},{"label":null,"name":"timestamp","type":"Core.Case","config":{},"tags":[],"uuid":"b97e80e8-0672-582f-8912-cfa06f396c38","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"datetime_add(contact[contact_field], offset, unit)","config":{},"test":"","uuid":"0e77a179-9319-4f10-b5b4-edac58e77574","destination_block":"17555509-92df-5668-8359-34cc78221e7d","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":16},"name":"ScheduleNextMessage","uuid":"7f247ac5-8884-504a-9f4b-74fdf1c28840"},"card_item":{"expression":{},"meta":{"column":3,"line":28},"type":"expression"},"index":0}}}}}},{"label":null,"name":"schedule_next_message_case_condition_1_schedule_stack","type":"Io.Turn.ScheduleFlow","config":{"flow_id":"8eb4490c-dc45-4c1f-bf10-1a95158ef45f","schedule_at":"timestamp"},"tags":[],"uuid":"17555509-92df-5668-8359-34cc78221e7d","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"schedule_next_message_case_condition_1_schedule_stack","config":{},"test":"","uuid":"d50c2b03-2987-435e-a097-2def1ed39454","destination_block":"9d2c50d9-b32e-502a-bb72-77055a88a4f9","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":16},"name":"ScheduleNextMessage","uuid":"7f247ac5-8884-504a-9f4b-74fdf1c28840"},"card_item":{"meta":{"column":3,"line":30},"schedule_stack":{},"type":"schedule_stack"},"index":0}}}}}},{"label":null,"name":"message_scheduled_at","type":"Core.Output","config":{"value":"\"@timestamp\""},"tags":[],"uuid":"9d2c50d9-b32e-502a-bb72-77055a88a4f9","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"message_scheduled_at","config":{},"test":"","uuid":"cabe596a-7256-4ad4-964c-79f6ec5424b3","destination_block":null,"semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":16},"name":"ScheduleNextMessage","uuid":"7f247ac5-8884-504a-9f4b-74fdf1c28840"},"card_item":{"meta":{"column":3,"line":31},"type":"write_result","write_result":{}},"index":0}}}}}},{"label":null,"name":"schedule_next_message_case_condition_0_text","type":"MobilePrimitives.Message","config":{"prompt":"5cb737f4-a474-45ea-bdfb-9832e0093c0e"},"tags":[],"uuid":"e8dcfb9c-3c9b-5c24-9a70-5e10d845d434","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"schedule_next_message_case_condition_0_text","config":{},"test":"","uuid":"d9bce2fe-942b-4264-b634-e984187c57c6","destination_block":null,"semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":"count(contentset.body.pages) == contact.push_messaging_content_set_position","meta":{"column":1,"line":11},"name":"ScheduleNextMessage","uuid":"9e4d88f3-c69c-559d-a9fb-c92bccadd905"},"card_item":{"meta":{"column":3,"line":13},"text":{},"type":"text"},"index":0}}}}}},{"label":null,"name":"contentset","type":"Io.Turn.Webhook","config":{"timeout":5000,"mode":"sync","body":null,"query":[],"url":"https://content-repo-api-qa.prk-k8s.prd-p6t.org/api/v2/orderedcontent/@contact.push_messaging_content_set/","headers":[["Authorization","Token @global.config.contentrepo_token"]],"method":"GET","cache_ttl":60000},"tags":[],"uuid":"13f70cd6-081d-57f6-903c-8562b00f3fb6","ui_metadata":{"canvas_coordinates":{"x":0,"y":0}},"exits":[{"default":true,"name":"Default exit to \"ScheduleNextMessage\"","config":{},"test":"","uuid":"eac1f717-448c-4620-bf4e-57b2143ad036","destination_block":"9e4d88f3-c69c-559d-a9fb-c92bccadd905","semantic_label":"","vendor_metadata":{}}],"semantic_label":null,"vendor_metadata":{"io":{"turn":{"stacks_dsl":{"0.1.0":{"card":{"condition":null,"meta":{"column":1,"line":1},"name":"GetContentSet","uuid":"26e7e17c-08a7-5f24-971c-0a542996de11"},"card_item":{"meta":{"column":3,"line":2},"type":"webhook","webhook":{}},"index":0}}}}}}],"last_modified":"2024-10-09T14:43:45.911316Z","uuid":"cce3cb8a-105b-5804-a279-dc3bc15e90bc","languages":[{"id":"e83350e8-d186-4813-8655-b0bd4e61b0f3","label":"English","variant":null,"iso_639_3":"eng","bcp_47":null}],"first_block_id":"13f70cd6-081d-57f6-903c-8562b00f3fb6","interaction_timeout":300,"vendor_metadata":{},"supported_modes":["RICH_MESSAGING"],"exit_block_id":""}],"vendor_metadata":{},"specification_version":"1.0.0-rc3"}